% 
load('mnist_train.mat');
idx = unidrnd(60000, 6000, 1);
x = train_X(idx, :);
labels = train_labels(idx);

% for perplexity = 10:10:300
%     tsne(x, labels, 2, 30, perplexity);
% end

% process output of above command to array rawdata where
% rows of rawdata are [perplexity, iteration, error]

rawdata = [
    10 10 6.2183;
    10 20 5.0573;
    10 30 4.1554;
    10 40 3.6892;
    10 50 3.4179;
    10 60 3.2348;
    10 70 3.0942;
    10 80 2.9848;
    10 90 2.8957;
    10 100 2.8205;
    10 110 2.7557;
    10 120 2.6994;
    10 130 2.6496;
    10 140 2.6048;
    10 150 2.5643;
    10 160 2.5272;
    10 170 2.4932;
    10 180 2.4624;
    10 190 2.4336;
    10 200 2.4069;
    10 210 2.3817;
    10 220 2.358;
    10 230 2.3356;
    10 240 2.3148;
    10 250 2.2951;
    10 260 2.2613;
    10 270 2.218;
    10 280 2.1782;
    10 290 2.1442;
    10 300 2.1133;
    20 10 5.55;
    20 20 4.5522;
    20 30 3.643;
    20 40 3.2088;
    20 50 2.9564;
    20 60 2.7944;
    20 70 2.6738;
    20 80 2.58;
    20 90 2.503;
    20 100 2.4379;
    20 110 2.383;
    20 120 2.3358;
    20 130 2.2945;
    20 140 2.2585;
    20 150 2.2266;
    20 160 2.1979;
    20 170 2.1717;
    20 180 2.1476;
    20 190 2.1256;
    20 200 2.1053;
    20 210 2.0864;
    20 220 2.0688;
    20 230 2.0525;
    20 240 2.0373;
    20 250 2.0231;
    20 260 1.9986;
    20 270 1.9675;
    20 280 1.9385;
    20 290 1.9138;
    20 300 1.8921;
    30 10 5.1555;
    30 20 4.1893;
    30 30 3.282;
    30 40 2.9046;
    30 50 2.6791;
    30 60 2.5276;
    30 70 2.4177;
    30 80 2.333;
    30 90 2.2648;
    30 100 2.2069;
    30 110 2.1573;
    30 120 2.1151;
    30 130 2.0779;
    30 140 2.0459;
    30 150 2.0178;
    30 160 1.9928;
    30 170 1.9702;
    30 180 1.9497;
    30 190 1.9312;
    30 200 1.914;
    30 210 1.8981;
    30 220 1.8835;
    30 230 1.8698;
    30 240 1.8569;
    30 250 1.8448;
    30 260 1.8236;
    30 270 1.7977;
    30 280 1.7734;
    30 290 1.7528;
    30 300 1.7353;
    40 10 4.8743;
    40 20 3.9074;
    40 30 2.9855;
    40 40 2.6304;
    40 50 2.4123;
    40 60 2.2691;
    40 70 2.1672;
    40 80 2.0889;
    40 90 2.0274;
    40 100 1.9766;
    40 110 1.9343;
    40 120 1.8982;
    40 130 1.8667;
    40 140 1.8388;
    40 150 1.8133;
    40 160 1.7922;
    40 170 1.7734;
    40 180 1.7563;
    40 190 1.7406;
    40 200 1.7262;
    40 210 1.7128;
    40 220 1.7003;
    40 230 1.6885;
    40 240 1.6777;
    40 250 1.6676;
    40 260 1.6504;
    40 270 1.6295;
    40 280 1.6101;
    40 290 1.5929;
    40 300 1.5777;
    50 10 4.6554;
    50 20 3.6573;
    50 30 2.7952;
    50 40 2.4492;
    50 50 2.2411;
    50 60 2.1062;
    50 70 2.0104;
    50 80 1.9391;
    50 90 1.883;
    50 100 1.8367;
    50 110 1.7981;
    50 120 1.7657;
    50 130 1.7376;
    50 140 1.7131;
    50 150 1.6914;
    50 160 1.6721;
    50 170 1.6548;
    50 180 1.6391;
    50 190 1.6248;
    50 200 1.6117;
    50 210 1.5996;
    50 220 1.5882;
    50 230 1.5773;
    50 240 1.5673;
    50 250 1.5583;
    50 260 1.543;
    50 270 1.5239;
    50 280 1.5056;
    50 290 1.4894;
    50 300 1.4757;
    60 10 4.4763;
    60 20 3.621;
    60 30 2.6753;
    60 40 2.3335;
    60 50 2.1415;
    60 60 2.0149;
    60 70 1.9236;
    60 80 1.8558;
    60 90 1.8033;
    60 100 1.7606;
    60 110 1.7253;
    60 120 1.6953;
    60 130 1.6697;
    60 140 1.6473;
    60 150 1.6276;
    60 160 1.6099;
    60 170 1.5939;
    60 180 1.579;
    60 190 1.5652;
    60 200 1.5519;
    60 210 1.5395;
    60 220 1.5285;
    60 230 1.5187;
    60 240 1.5096;
    60 250 1.5011;
    60 260 1.4871;
    60 270 1.4704;
    60 280 1.4553;
    60 290 1.4424;
    60 300 1.4313;
    70 10 4.3245;
    70 20 3.3573;
    70 30 2.4922;
    70 40 2.1754;
    70 50 1.9942;
    70 60 1.8747;
    70 70 1.7886;
    70 80 1.7245;
    70 90 1.6747;
    70 100 1.6344;
    70 110 1.6008;
    70 120 1.5729;
    70 130 1.5491;
    70 140 1.5284;
    70 150 1.5103;
    70 160 1.4941;
    70 170 1.4795;
    70 180 1.4662;
    70 190 1.4541;
    70 200 1.443;
    70 210 1.4328;
    70 220 1.4233;
    70 230 1.4144;
    70 240 1.4061;
    70 250 1.3984;
    70 260 1.3854;
    70 270 1.3695;
    70 280 1.3549;
    70 290 1.3427;
    70 300 1.3326;
    80 10 4.1929;
    80 20 3.394;
    80 30 2.4661;
    80 40 2.1524;
    80 50 1.9752;
    80 60 1.8599;
    80 70 1.7772;
    80 80 1.7154;
    80 90 1.6673;
    80 100 1.6277;
    80 110 1.5937;
    80 120 1.5635;
    80 130 1.5368;
    80 140 1.5136;
    80 150 1.4937;
    80 160 1.4769;
    80 170 1.4626;
    80 180 1.45;
    80 190 1.4387;
    80 200 1.4285;
    80 210 1.4193;
    80 220 1.4108;
    80 230 1.403;
    80 240 1.3959;
    80 250 1.3894;
    80 260 1.3785;
    80 270 1.3653;
    80 280 1.3536;
    80 290 1.3437;
    80 300 1.3353;
    90 10 4.0767;
    90 20 3.235;
    90 30 2.3642;
    90 40 2.0616;
    90 50 1.8887;
    90 60 1.7725;
    90 70 1.6933;
    90 80 1.6329;
    90 90 1.5826;
    90 100 1.5406;
    90 110 1.5095;
    90 120 1.4839;
    90 130 1.4621;
    90 140 1.4436;
    90 150 1.4274;
    90 160 1.4133;
    90 170 1.4006;
    90 180 1.3895;
    90 190 1.3795;
    90 200 1.3705;
    90 210 1.3624;
    90 220 1.3547;
    90 230 1.3479;
    90 240 1.3415;
    90 250 1.3358;
    90 260 1.3263;
    90 270 1.3149;
    90 280 1.3044;
    90 290 1.2957;
    90 300 1.2883;
    100 10 3.9727;
    100 20 3.1576;
    100 30 2.3351;
    100 40 2.0459;
    100 50 1.8862;
    100 60 1.7802;
    100 70 1.7038;
    100 80 1.6463;
    100 90 1.6015;
    100 100 1.5656;
    100 110 1.5355;
    100 120 1.5099;
    100 130 1.4887;
    100 140 1.4707;
    100 150 1.4552;
    100 160 1.4416;
    100 170 1.4294;
    100 180 1.4186;
    100 190 1.4087;
    100 200 1.3994;
    100 210 1.3906;
    100 220 1.3816;
    100 230 1.3726;
    100 240 1.3644;
    100 250 1.3559;
    100 260 1.3415;
    100 270 1.3282;
    100 280 1.3173;
    100 290 1.308;
    100 300 1.3004;
    110 10 3.8785;
    110 20 3.0694;
    110 30 2.2087;
    110 40 1.9349;
    110 50 1.7801;
    110 60 1.6802;
    110 70 1.6086;
    110 80 1.5546;
    110 90 1.513;
    110 100 1.4802;
    110 110 1.4536;
    110 120 1.4314;
    110 130 1.4124;
    110 140 1.3963;
    110 150 1.3824;
    110 160 1.3702;
    110 170 1.3593;
    110 180 1.3496;
    110 190 1.3409;
    110 200 1.3329;
    110 210 1.3256;
    110 220 1.319;
    110 230 1.3128;
    110 240 1.3073;
    110 250 1.3022;
    110 260 1.294;
    110 270 1.2846;
    110 280 1.2764;
    110 290 1.2693;
    110 300 1.2631;
    120 10 3.7925;
    120 20 2.9707;
    120 30 2.1201;
    120 40 1.8642;
    120 50 1.7201;
    120 60 1.6251;
    120 70 1.5551;
    120 80 1.5031;
    120 90 1.4637;
    120 100 1.4323;
    120 110 1.4063;
    120 120 1.3846;
    120 130 1.3659;
    120 140 1.3492;
    120 150 1.3335;
    120 160 1.3182;
    120 170 1.3037;
    120 180 1.2918;
    120 190 1.2823;
    120 200 1.2746;
    120 210 1.2676;
    120 220 1.2614;
    120 230 1.2559;
    120 240 1.251;
    120 250 1.2464;
    120 260 1.2387;
    120 270 1.2302;
    120 280 1.223;
    120 290 1.2168;
    120 300 1.2115;
    130 10 3.7133;
    130 20 2.8282;
    130 30 2.0791;
    130 40 1.8246;
    130 50 1.6817;
    130 60 1.5918;
    130 70 1.5279;
    130 80 1.4794;
    130 90 1.4415;
    130 100 1.41;
    130 110 1.3805;
    130 120 1.3589;
    130 130 1.3424;
    130 140 1.3283;
    130 150 1.3159;
    130 160 1.3048;
    130 170 1.2937;
    130 180 1.2848;
    130 190 1.2772;
    130 200 1.2704;
    130 210 1.2642;
    130 220 1.2585;
    130 230 1.2533;
    130 240 1.2486;
    130 250 1.2443;
    130 260 1.2373;
    130 270 1.2294;
    130 280 1.2226;
    130 290 1.217;
    130 300 1.2123;
    140 10 3.64;
    140 20 2.8653;
    140 30 2.0282;
    140 40 1.7721;
    140 50 1.6325;
    140 60 1.5443;
    140 70 1.4819;
    140 80 1.4348;
    140 90 1.3991;
    140 100 1.3712;
    140 110 1.3486;
    140 120 1.3299;
    140 130 1.3138;
    140 140 1.2999;
    140 150 1.2881;
    140 160 1.278;
    140 170 1.2692;
    140 180 1.2614;
    140 190 1.2546;
    140 200 1.2484;
    140 210 1.243;
    140 220 1.2381;
    140 230 1.2336;
    140 240 1.2295;
    140 250 1.2258;
    140 260 1.2198;
    140 270 1.2128;
    140 280 1.2068;
    140 290 1.2017;
    140 300 1.1974;
    150 10 3.5718;
    150 20 2.9628;
    150 30 2.1148;
    150 40 1.8536;
    150 50 1.7069;
    150 60 1.6115;
    150 70 1.5448;
    150 80 1.4966;
    150 90 1.457;
    150 100 1.4252;
    150 110 1.4014;
    150 120 1.3823;
    150 130 1.3662;
    150 140 1.3525;
    150 150 1.3406;
    150 160 1.3302;
    150 170 1.3209;
    150 180 1.313;
    150 190 1.3058;
    150 200 1.2993;
    150 210 1.2935;
    150 220 1.2881;
    150 230 1.2832;
    150 240 1.2787;
    150 250 1.2747;
    150 260 1.2678;
    150 270 1.2602;
    150 280 1.2536;
    150 290 1.248;
    150 300 1.2432;
    160 10 3.5079;
    160 20 2.7036;
    160 30 1.945;
    160 40 1.7045;
    160 50 1.5733;
    160 60 1.489;
    160 70 1.4298;
    160 80 1.3861;
    160 90 1.3526;
    160 100 1.3263;
    160 110 1.3052;
    160 120 1.288;
    160 130 1.2736;
    160 140 1.2612;
    160 150 1.2507;
    160 160 1.2417;
    160 170 1.2338;
    160 180 1.227;
    160 190 1.2208;
    160 200 1.2153;
    160 210 1.2103;
    160 220 1.2058;
    160 230 1.2018;
    160 240 1.1982;
    160 250 1.1949;
    160 260 1.1896;
    160 270 1.1835;
    160 280 1.1785;
    160 290 1.1744;
    160 300 1.1709;
    170 10 3.4479;
    170 20 2.7734;
    170 30 1.9158;
    170 40 1.6608;
    170 50 1.521;
    170 60 1.4357;
    170 70 1.3751;
    170 80 1.3281;
    170 90 1.2921;
    170 100 1.2646;
    170 110 1.2434;
    170 120 1.2263;
    170 130 1.2118;
    170 140 1.1997;
    170 150 1.1894;
    170 160 1.1805;
    170 170 1.1728;
    170 180 1.166;
    170 190 1.16;
    170 200 1.1547;
    170 210 1.1499;
    170 220 1.1455;
    170 230 1.1416;
    170 240 1.1381;
    170 250 1.1348;
    170 260 1.1297;
    170 270 1.1241;
    170 280 1.1193;
    170 290 1.1154;
    170 300 1.1122;
    180 10 3.3914;
    180 20 2.823;
    180 30 1.9322;
    180 40 1.6729;
    180 50 1.5329;
    180 60 1.4523;
    180 70 1.3962;
    180 80 1.3539;
    180 90 1.3204;
    180 100 1.2946;
    180 110 1.2742;
    180 120 1.2577;
    180 130 1.2439;
    180 140 1.2322;
    180 150 1.2222;
    180 160 1.2136;
    180 170 1.2061;
    180 180 1.1994;
    180 190 1.1933;
    180 200 1.1879;
    180 210 1.1831;
    180 220 1.1788;
    180 230 1.1751;
    180 240 1.1717;
    180 250 1.1686;
    180 260 1.1636;
    180 270 1.1579;
    180 280 1.153;
    180 290 1.1488;
    180 300 1.1453;
    190 10 3.3379;
    190 20 2.6432;
    190 30 1.8751;
    190 40 1.6496;
    190 50 1.5303;
    190 60 1.4531;
    190 70 1.3987;
    190 80 1.3566;
    190 90 1.3225;
    190 100 1.2943;
    190 110 1.2713;
    190 120 1.2523;
    190 130 1.2372;
    190 140 1.2247;
    190 150 1.2143;
    190 160 1.2052;
    190 170 1.1973;
    190 180 1.1902;
    190 190 1.1844;
    190 200 1.1794;
    190 210 1.1746;
    190 220 1.1705;
    190 230 1.1667;
    190 240 1.1631;
    190 250 1.1601;
    190 260 1.1551;
    190 270 1.1496;
    190 280 1.1448;
    190 290 1.1406;
    190 300 1.1371;
    200 10 3.2871;
    200 20 2.7123;
    200 30 1.8662;
    200 40 1.6277;
    200 50 1.5003;
    200 60 1.4148;
    200 70 1.3533;
    200 80 1.3072;
    200 90 1.2717;
    200 100 1.2446;
    200 110 1.2228;
    200 120 1.2047;
    200 130 1.1903;
    200 140 1.1786;
    200 150 1.169;
    200 160 1.1608;
    200 170 1.1537;
    200 180 1.1475;
    200 190 1.1421;
    200 200 1.1373;
    200 210 1.133;
    200 220 1.1292;
    200 230 1.1257;
    200 240 1.1223;
    200 250 1.1195;
    200 260 1.1151;
    200 270 1.11;
    200 280 1.106;
    200 290 1.1026;
    200 300 1.0999;
    210 10 3.2388;
    210 20 2.5768;
    210 30 1.7342;
    210 40 1.5206;
    210 50 1.4064;
    210 60 1.3337;
    210 70 1.2833;
    210 80 1.246;
    210 90 1.2176;
    210 100 1.195;
    210 110 1.1772;
    210 120 1.1628;
    210 130 1.1512;
    210 140 1.1413;
    210 150 1.1329;
    210 160 1.1258;
    210 170 1.1197;
    210 180 1.1145;
    210 190 1.1098;
    210 200 1.1058;
    210 210 1.1022;
    210 220 1.099;
    210 230 1.0962;
    210 240 1.0936;
    210 250 1.0913;
    210 260 1.0876;
    210 270 1.0833;
    210 280 1.0797;
    210 290 1.0768;
    210 300 1.0744;
    220 10 3.1928;
    220 20 2.5729;
    220 30 1.8149;
    220 40 1.5943;
    220 50 1.4727;
    220 60 1.3988;
    220 70 1.3495;
    220 80 1.3138;
    220 90 1.2868;
    220 100 1.2657;
    220 110 1.2487;
    220 120 1.2348;
    220 130 1.2236;
    220 140 1.2142;
    220 150 1.2063;
    220 160 1.1995;
    220 170 1.1936;
    220 180 1.1885;
    220 190 1.1841;
    220 200 1.1801;
    220 210 1.1765;
    220 220 1.1732;
    220 230 1.1698;
    220 240 1.1663;
    220 250 1.1627;
    220 260 1.1571;
    220 270 1.1518;
    220 280 1.1477;
    220 290 1.1448;
    220 300 1.1424;
    230 10 3.1488;
    230 20 2.6005;
    230 30 1.7598;
    230 40 1.534;
    230 50 1.4142;
    230 60 1.3423;
    230 70 1.2935;
    230 80 1.2579;
    230 90 1.2304;
    230 100 1.209;
    230 110 1.1916;
    230 120 1.1772;
    230 130 1.1652;
    230 140 1.1551;
    230 150 1.1466;
    230 160 1.1392;
    230 170 1.1327;
    230 180 1.1271;
    230 190 1.1222;
    230 200 1.1179;
    230 210 1.1142;
    230 220 1.1106;
    230 230 1.1077;
    230 240 1.1052;
    230 250 1.1031;
    230 260 1.0996;
    230 270 1.0957;
    230 280 1.0926;
    230 290 1.0902;
    230 300 1.0881;
    240 10 3.1067;
    240 20 2.4812;
    240 30 1.6615;
    240 40 1.453;
    240 50 1.345;
    240 60 1.2768;
    240 70 1.2305;
    240 80 1.1971;
    240 90 1.1718;
    240 100 1.1519;
    240 110 1.1358;
    240 120 1.1229;
    240 130 1.1124;
    240 140 1.1036;
    240 150 1.0961;
    240 160 1.0896;
    240 170 1.0841;
    240 180 1.0792;
    240 190 1.075;
    240 200 1.071;
    240 210 1.0672;
    240 220 1.0638;
    240 230 1.0611;
    240 240 1.0589;
    240 250 1.0569;
    240 260 1.0538;
    240 270 1.0505;
    240 280 1.0479;
    240 290 1.0458;
    240 300 1.0441;
    250 10 3.0664;
    250 20 2.4953;
    250 30 1.7219;
    250 40 1.4955;
    250 50 1.3804;
    250 60 1.3091;
    250 70 1.2615;
    250 80 1.2263;
    250 90 1.1996;
    250 100 1.1787;
    250 110 1.1623;
    250 120 1.1487;
    250 130 1.138;
    250 140 1.1293;
    250 150 1.1218;
    250 160 1.1155;
    250 170 1.1099;
    250 180 1.1053;
    250 190 1.1014;
    250 200 1.0979;
    250 210 1.0948;
    250 220 1.0921;
    250 230 1.0898;
    250 240 1.0877;
    250 250 1.0859;
    250 260 1.083;
    250 270 1.0798;
    250 280 1.0772;
    250 290 1.075;
    250 300 1.0732;
    260 10 3.0276;
    260 20 2.5346;
    260 30 1.7715;
    260 40 1.5502;
    260 50 1.4397;
    260 60 1.3711;
    260 70 1.3175;
    260 80 1.2748;
    260 90 1.2406;
    260 100 1.2149;
    260 110 1.1942;
    260 120 1.1777;
    260 130 1.1657;
    260 140 1.1559;
    260 150 1.1478;
    260 160 1.1404;
    260 170 1.1333;
    260 180 1.1279;
    260 190 1.1236;
    260 200 1.1199;
    260 210 1.1167;
    260 220 1.114;
    260 230 1.1117;
    260 240 1.1097;
    260 250 1.108;
    260 260 1.1052;
    260 270 1.1023;
    260 280 1.1;
    260 290 1.0982;
    260 300 1.0967;
    270 10 2.9902;
    270 20 2.3484;
    270 30 1.6704;
    270 40 1.4756;
    270 50 1.3688;
    270 60 1.3;
    270 70 1.2431;
    270 80 1.2034;
    270 90 1.1777;
    270 100 1.1585;
    270 110 1.1433;
    270 120 1.1312;
    270 130 1.1213;
    270 140 1.1132;
    270 150 1.1064;
    270 160 1.1004;
    270 170 1.0953;
    270 180 1.0906;
    270 190 1.0854;
    270 200 1.0813;
    270 210 1.0781;
    270 220 1.0754;
    270 230 1.0727;
    270 240 1.0702;
    270 250 1.0678;
    270 260 1.0647;
    270 270 1.0619;
    270 280 1.0596;
    270 290 1.0577;
    270 300 1.0561;
    280 10 2.9543;
    280 20 2.4096;
    280 30 1.6739;
    280 40 1.4812;
    280 50 1.3749;
    280 60 1.3013;
    280 70 1.2536;
    280 80 1.2206;
    280 90 1.1964;
    280 100 1.1771;
    280 110 1.1613;
    280 120 1.1477;
    280 130 1.1352;
    280 140 1.1221;
    280 150 1.1057;
    280 160 1.0889;
    280 170 1.077;
    280 180 1.0692;
    280 190 1.0634;
    280 200 1.0587;
    280 210 1.0545;
    280 220 1.0506;
    280 230 1.0471;
    280 240 1.0439;
    280 250 1.0409;
    280 260 1.0361;
    280 270 1.0305;
    280 280 1.0244;
    280 290 1.0177;
    280 300 1.0109;
    290 10 2.9196;
    290 20 2.3919;
    290 30 1.6628;
    290 40 1.4556;
    290 50 1.3262;
    290 60 1.2597;
    290 70 1.2153;
    290 80 1.1837;
    290 90 1.1602;
    290 100 1.1421;
    290 110 1.1278;
    290 120 1.1163;
    290 130 1.107;
    290 140 1.0992;
    290 150 1.0928;
    290 160 1.0874;
    290 170 1.0828;
    290 180 1.0788;
    290 190 1.0753;
    290 200 1.0722;
    290 210 1.0695;
    290 220 1.067;
    290 230 1.0648;
    290 240 1.0628;
    290 250 1.0608;
    290 260 1.0574;
    290 270 1.0538;
    290 280 1.0504;
    290 290 1.0473;
    290 300 1.0448;
    300 10 2.8861;
    300 20 2.3827;
    300 30 1.5915;
    300 40 1.3989;
    300 50 1.3031;
    300 60 1.2439;
    300 70 1.204;
    300 80 1.1741;
    300 90 1.1488;
    300 100 1.1303;
    300 110 1.1156;
    300 120 1.1038;
    300 130 1.093;
    300 140 1.0827;
    300 150 1.0757;
    300 160 1.0699;
    300 170 1.0651;
    300 180 1.0607;
    300 190 1.0555;
    300 200 1.0512;
    300 210 1.0476;
    300 220 1.0445;
    300 230 1.0418;
    300 240 1.0393;
    300 250 1.0372;
    300 260 1.0341;
    300 270 1.0312;
    300 280 1.029;
    300 290 1.0273;
    300 300 1.0258];

[X, Y] = meshgrid(10:10:300, 10:10:300);
Z = reshape(rawdata(:, 3), 30, 30);
figure;
surf(X, Y, Z);
xlabel('perplexity');
ylabel('iteration');
zlabel('cost (error)');